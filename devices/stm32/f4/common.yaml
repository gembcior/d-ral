# Base on the PM0214 STM32 document

brand: stm32
family: f4

peripherals:
  mpu:
    type: normal
    address: 0xE000ED90
    registers:
      typer:
        offset: 0x00
        policy: r
        fields:
          separate:
            position: 0
            mask:     0x1
            policy:   r
          dregion:
            position: 9
            mask:     0xFF
            policy:   r
          iregion:
            position: 16
            mask:     0xFF
            policy:   r
      ctrl:
        offset: 0x04
        policy: rw
        fields:
          enable:
            position: 0
            mask:     0x1
            policy:   rw
          hfnmiena:
            position: 1
            mask:     0x1
            policy:   rw
          privdefena:
            position: 2
            mask:     0x1
            policy:   rw
      rnr:
        offset: 0x08
        policy: rw
        fields:
          region:
            position: 0
            mask:     0xFF
            policy:   rw
      rbar:
        offset: 0x0C
        policy: rw
        fields:
          region:
            position: 0
            mask:     0xF
            policy:   rw
          valid:
            position: 4
            mask:     0x1
            policy:   rw
          addr:
            position: 5
            mask:     0x7FFFFFF
            policy:   rw
      rasr:
        offset: 0x10
        policy: rw
        fields:
          enable:
            position: 0
            mask:     0x1
            policy:   rw
          size:
            position: 1
            mask:     0x1F
            policy:   rw
          srd:
            position: 8
            mask:     0xFF
            policy:   rw
          b:
            position: 16
            mask:     0x1
            policy:   rw
          c:
            position: 17
            mask:     0x1
            policy:   rw
          s:
            position: 18
            mask:     0x1
            policy:   rw
          tex:
            position: 19
            mask:     0x7
            policy:   rw
          ap:
            position: 27
            mask:     0x7
            policy:   rw
          xn:
            position: 28
            mask:     0x1
            policy:   rw

  nvic:
    type: normal
    address: 0xE000E100
    registers:
      iser:
        range:
          start: 0
          end: 7
        offset: 0x100
        policy: rs
        fields:
          setena:
            position: 0
            mask:     0xFFFFFFFF
            policy:   rs
      icer:
        range:
          start: 0
          end: 7
        offset: 0x180
        policy: rc_w1
        fields:
          clrena:
            position: 0
            mask:     0xFFFFFFFF
            policy:   rc_w1
      ispr:
        range:
          start: 0
          end: 7
        offset: 0x200
        policy: rs
        fields:
          setpend:
            position: 0
            mask:     0xFFFFFFFF
            policy:   rs
      icpr:
        range:
          start: 0
          end: 7
        offset: 0x280
        policy: rc_w1
        fields:
          clrpend:
            position: 0
            mask:     0xFFFFFFFF
            policy:   rc_w1
      iabr:
        range:
          start: 0
          end: 7
        offset: 0x300
        policy: r
        fields:
          active:
            position: 0
            mask:     0xFFFFFFFF
            policy:   r
      ipr:
        range:
          start: 0
          end: 59
        offset: 0x400
        policy: rw
        fields:
          ip0:
            position: 0
            mask:     0xFF
            policy:   rw
          ip1:
            position: 8
            mask:     0xFF
            policy:   rw
          ip2:
            position: 16
            mask:     0xFF
            policy:   rw
          ip3:
            position: 24
            mask:     0xFF
            policy:   rw
      stir:
        offset: 0xE00
        policy: w
        fields:
          intid:
            position: 0
            mask:     0x1FF
            policy:   w

  scb:
    type: normal
    address: 0xE000ED00
    registers:
      cpuid:
        offset: 0x00
        policy: r
        fields:
          revision:
            position: 0
            mask:     0xF
            policy:   r
          partno:
            position: 4
            mask:     0xFFF
            policy:   r
          constant:
            position: 16
            mask:     0xF
            policy:   r
          variant:
            position: 20
            mask:     0xF
            policy:   r
          implementer:
            position: 24
            mask:     0xFF
            policy:   r
      icsr:
        offset: 0x04
        policy: rw
        fields:
          vectactive:
            position: 0
            mask:     0x1FF
            policy:   rw
          retobase:
            position: 11
            mask:     0x1
            policy:   r
          vectpending:
            position: 12
            mask:     0x7F
            policy:   r
          isrpending:
            position: 22
            mask:     0x1
            policy:   r
          pendstclr:
            position: 25
            mask:     0x1
            policy:   w
          pendstset:
            position: 26
            mask:     0x1
            policy:   rw
          pendsvclr:
            position: 27
            mask:     0x1
            policy:   w
          pendsvset:
            position: 28
            mask:     0x1
            policy:   rw
          nmipendset:
            position: 31
            mask:     0x1
            policy:   rw
      vtor:
        offset: 0x08
        policy: rw
        fields:
          tbloff:
            position: 9
            mask:     0x1FFFFF
            policy:   rw
      aircr:
        offset: 0x0C
        policy: rw
        fields:
          vectreset:
            position: 0
            mask:     0x1
            policy:   w
          vectclractive:
            position: 1
            mask:     0x1
            policy:   w
          sysresetreq:
            position: 2
            mask:     0x1
            policy:   w
          prigroup:
            position: 8
            mask:     0x7
            policy:   rw
          endianess:
            position: 15
            mask:     0x1
            policy:   r
          vectkey:
            position: 16
            mask:     0xFFFF
            policy:   w
          vectkeystat:
            position: 16
            mask:     0xFFFF
            policy:   r
      scr:
        offset: 0x10
        policy: rw
        fields:
          sleeponexit:
            position: 1
            mask:     0x1
            policy:   rw
          sleepdeep:
            position: 2
            mask:     0x1
            policy:   rw
          seveonpend:
            position: 4
            mask:     0x1
            policy:   rw
      ccr:
        offset: 0x14
        policy: rw
        fields:
          nonbasethrdena:
            position: 0
            mask:     0x1
            policy:   rw
          usersetmpend:
            position: 1
            mask:     0x1
            policy:   rw
          unalignTrp:
            position: 3
            mask:     0x1
            policy:   rw
          div0Trp:
            position: 4
            mask:     0x1
            policy:   rw
          bfhfnmign:
            position: 8
            mask:     0x1
            policy:   rw
          stkalign:
            position: 9
            mask:     0x1
            policy:   rw
      shpr1:
        offset: 0x18
        policy: rw
        fields:
          pri4:
            position: 0
            mask:     0xFF
            policy:   rw
          pri5:
            position: 8
            mask:     0xFF
            policy:   rw
          pri6:
            position: 16
            mask:     0xFF
            policy:   rw
      shpr2:
        offset: 0x1C
        policy: rw
        fields:
          pri11:
            position: 24
            mask:     0xFF
            policy:   rw
      shpr3:
        offset: 0x20
        policy: rw
        fields:
          pri15:
            position: 24
            mask:     0xFF
            policy:   rw
          pri14:
            position: 16
            mask:     0xFF
            policy:   rw
      shcsr:
        offset: 0x24
        policy: rw
        fields:
          memfaultact:
            position: 0
            mask:     0x1
            policy:   rw
          busfaultact:
            position: 1
            mask:     0x1
            policy:   rw
          usgfaultact:
            position: 3
            mask:     0x1
            policy:   rw
          svcallact:
            position: 7
            mask:     0x1
            policy:   rw
          monitoract:
            position: 8
            mask:     0x1
            policy:   rw
          pendsvact:
            position: 10
            mask:     0x1
            policy:   rw
          systickact:
            position: 11
            mask:     0x1
            policy:   rw
          usgfaultpended:
            position: 12
            mask:     0x1
            policy:   rw
          memfaultpended:
            position: 13
            mask:     0x1
            policy:   rw
          busfaultpended:
            position: 14
            mask:     0x1
            policy:   rw
          svcallpended:
            position: 15
            mask:     0x1
            policy:   rw
          memfaultena:
            position: 16
            mask:     0x1
            policy:   rw
          busfaultena:
            position: 17
            mask:     0x1
            policy:   rw
          usgfaultena:
            position: 18
            mask:     0x1
            policy:   rw
      cfsr:
        offset: 0x28
        policy: rw
        fields:
          iaccviol:
            position: 0
            mask:     0x1
            policy:   rw
          daccviol:
            position: 1
            mask:     0x1
            policy:   rw
          munstkerr:
            position: 3
            mask:     0x1
            policy:   rw
          mstkerr:
            position: 4
            mask:     0x1
            policy:   rw
          mlsperr:
            position: 5
            mask:     0x1
            policy:   rw
          mmarvalid:
            position: 7
            mask:     0x1
            policy:   rw
          ibuserr:
            position: 8
            mask:     0x1
            policy:   rw
          preciserr:
            position: 9
            mask:     0x1
            policy:   rw
          impreciserr:
            position: 10
            mask:     0x1
            policy:   rw
          unstkerr:
            position: 11
            mask:     0x1
            policy:   rw
          stkerr:
            position: 12
            mask:     0x1
            policy:   rw
          lsperr:
            position: 13
            mask:     0x1
            policy:   rw
          bfarvalid:
            position: 15
            mask:     0x1
            policy:   rw
          undefinstr:
            position: 16
            mask:     0x1
            policy:   rc_w1
          invstate:
            position: 17
            mask:     0x1
            policy:   rc_w1
          invpc:
            position: 18
            mask:     0x1
            policy:   rc_w1
          nocp:
            position: 19
            mask:     0x1
            policy:   rc_w1
          unaligned:
            position: 24
            mask:     0x1
            policy:   rc_w1
          divbyzero:
            position: 25
            mask:     0x1
            policy:   rc_w1
      hfsr:
        offset: 0x2C
        policy: rw
        fields:
          vecttbl:
            position: 0
            mask:     0x1
            policy:   rc_w1
          forced:
            position: 30
            mask:     0x1
            policy:   rc_w1
          debugVt:
            position: 31
            mask:     0x1
            policy:   rc_w1
      mmfar:
        offset: 0x34
        policy: rw
        fields:
          mmfar:
            position: 0
            mask:     0xFFFFFFFF
            policy:   rw
      bfar:
        offset: 0x38
        policy: rw
        fields:
          bfar:
            position: 0
            mask:     0xFFFFFFFF
            policy:   rw
      afsr:
        offset: 0x3C
        policy: rw
        fields:
          impdef:
            position: 0
            mask:     0xFFFFFFFF
            policy:   rw
      cpacr:
        offset: 0x88
        policy: rw
        fields:
          cp10:
            position: 20
            mask:     0x3
            policy:   rw
          cp11:
            position: 22
            mask:     0x3
            policy:   rw

  stk:
    type: normal
    address: 0xE000E010
    registers:
      ctrl:
        offset: 0x00
        policy: rw
        fields:
          enable:
            position: 0
            mask:     0x1
            policy:   rw
          tickint:
            position: 1
            mask:     0x1
            policy:   rw
          clksource:
            position: 2
            mask:     0x1
            policy:   rw
          countflag:
            position: 16
            mask:     0x1
            policy:   rw
      load:
        offset: 0x04
        policy: rw
        fields:
          reload:
            position: 0
            mask:     0xFFFFFF
            policy:   rw
      val:
        offset: 0x08
        policy: rw
        fields:
          current:
            position: 0
            mask:     0xFFFFFF
            policy:   rw
      calib:
        offset: 0x0C
        policy: r
        fields:
          tenms:
            position: 0
            mask:     0xFFFFFF
            policy:   r
          shew:
            position: 30
            mask:     0x1
            policy:   r
          noref:
            position: 31
            mask:     0x1
            policy:   r

  fpu:
    type: normal
    address: 0xE000EF30
    registers:
      fpccr:
        offset: 0x04
        policy: rw
        fields:
          lspact:
            position: 0
            mask:     0x1
            policy:   rw
          user:
            position: 1
            mask:     0x1
            policy:   rw
          thread:
            position: 3
            mask:     0x1
            policy:   rw
          hfrdy:
            position: 4
            mask:     0x1
            policy:   rw
          mmrdy:
            position: 5
            mask:     0x1
            policy:   rw
          bfrdy:
            position: 6
            mask:     0x1
            policy:   rw
          monrdy:
            position: 8
            mask:     0x1
            policy:   rw
          lspen:
            position: 30
            mask:     0x1
            policy:   rw
          aspen:
            position: 31
            mask:     0x1
            policy:   rw
      fpcar:
        offset: 0x08
        policy: rw
        fields:
          address:
            position: 3
            mask:     0x1FFFFFFF
            policy:   rw
      fpdscr:
        offset: 0x0C
        policy: rw
        fields:
          rmode:
            position: 22
            mask:     0x3
            policy:   rw
          rz:
            position: 24
            mask:     0x1
            policy:   rw
          dn:
            position: 25
            mask:     0x1
            policy:   rw
          ahp:
            position: 26
            mask:     0x1
            policy:   rw

